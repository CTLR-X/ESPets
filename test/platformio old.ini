[env:esp32-s3-devkitc-1-n16r8] ; Consider using specific ID if available, otherwise devkitc-1 is ok
platform = espressif32
board = esp32-s3-devkitc-1      ; Or specific N16R8 variant ID if found
framework = arduino
monitor_speed = 115200

; --- PSRAM Settings ---
board_build.psram.enable = true       ; Standard way to enable
board_build.psram.type = opi          ; Correct type for R8

; --- Flash Settings ---
board_build.flash_mode = qio
board_build.f_flash = 80000000L
board_build.flash_size = 16MB         ; Use board_build prefix

; --- Memory Type (Links Flash & PSRAM init) ---
board_build.arduino.memory_type = qio_opi

; --- Partition Scheme (Optional but recommended for 16MB) ---
board_build.partitions = huge_app.csv

; --- Build Flags ---
build_flags =
    -DARDUINO_USB_MODE=1
    -DBOARD_HAS_PSRAM               ; Keep this as it seems essential

; --- Source Filter ---
build_src_filter = 
    +<*> 
    +<ESP.cpp>
    -<Arduino.cpp>
    -<main.cpp>
    -<ESP Spofity Controls.cpp>

; --- Upload Settings ---
board_upload.maximum_size = 16777216  ; Keep this, ensures check against 16MB flash limit

; --- Library Dependencies ---
lib_deps =
    bitbank2/JPEGDEC@^1.2.8          ; Library for JPEG decoding
